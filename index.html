<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ë‚˜ëŠ” ìš°ì˜ˆì›</title>
<meta name="description" content="ìš°ì˜ˆì›ì˜ ì´ì•¼ê¸°">
<!-- ê·€ì—¬ìš´ ê¸€ì”¨ì²´ -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Dongle:wght@300;400;700&family=Jua&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1:#fff0f6; --bg2:#ffe1ef; --ink:#433646; --muted:#6f5f6b;
    --line:#ffd1ea; --accent:#ff6bb8; --accent2:#ff8fc8; --card:#fff;
    --shadow: 0 18px 40px rgba(255,105,180,.28);
  }
  html,body{height:100%;margin:0}
  body{
    background:
      radial-gradient(1200px 700px at 75% -10%, #ffd6e7, transparent),
      linear-gradient(180deg,var(--bg1),var(--bg2));
    font-family: 'Dongle', 'Jua', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Apple SD Gothic Neo","Noto Sans KR", sans-serif;
    color:var(--ink); display:grid; place-items:center;
  }
  .frame{
    width:min(96vw,980px); aspect-ratio:16/9; background:#fff;
    border:6px solid #ffb3d9; border-radius:24px; overflow:hidden;
    box-shadow: var(--shadow); position:relative;
  }
  .top{
    position:absolute; inset:0 0 auto 0; padding:10px; display:flex; gap:8px; align-items:center;
    background:linear-gradient(180deg,#fff8,#fff0);
  }
  .pill{
    background:linear-gradient(#fff,#fff7fb); border:2px solid var(--line); border-radius:14px;
    padding:6px 12px; display:flex; align-items:center; gap:8px; font-weight:700; color:var(--ink);
    box-shadow:0 8px 18px rgba(255,105,180,.22);
  }
  .board{
    position:absolute; inset:56px 16px 140px 16px; display:grid; grid-template-columns: 1fr 1fr; gap:12px;
  }
  .stage{
    border:2px solid var(--line); border-radius:16px; background:linear-gradient(#fff,#fff7fb);
    padding:14px; box-shadow:0 10px 28px rgba(255,105,180,.18); position:relative; overflow:hidden;
  }
  .avatarWrap{ display:grid; place-items:center; background:
      radial-gradient(900px 500px at 15% -15%, #ffe9f3, transparent),
      radial-gradient(900px 500px at 90% 10%, #ffe2f0, transparent),
      #fff; border-radius:14px; height:100%;
  }
  .avatarWrap img{
    width:min(80%,360px); max-height:100%; object-fit:contain; filter: drop-shadow(0 16px 28px rgba(255,105,180,.28));
    border-radius:16px;
  }
  .bubble{
    position:absolute; left:20px; right:20px; bottom:160px; display:none;
    background:#fff; border:2px solid var(--line); border-radius:18px;
    padding:12px 14px; box-shadow:0 10px 28px rgba(255,105,180,.22);
    font-size:28px; line-height:1.45; color:var(--muted);
  }

  .textbox{
    position:absolute; left:0; right:0; bottom:0; padding:16px;
  }
  .card{
    background:linear-gradient(#fff,#fff7fb); border:2px solid var(--line); border-radius:18px;
    padding:16px 18px; max-width: 96%; margin:0 auto 8px; box-shadow:0 14px 34px rgba(255,105,180,.22);
  }
  .who{ font-family:'Jua', sans-serif; font-size:30px; color:var(--accent); margin-bottom:4px; letter-spacing: .5px; }
  .txt{ font-size:30px; line-height:1.5; color:var(--muted); min-height:80px }

  .controls{
    position:absolute; left:0; right:0; bottom:8px; display:flex; justify-content:center; gap:8px;
  }
  button{
    border:none; cursor:pointer; border-radius:14px; padding:10px 16px;
    background:linear-gradient(180deg,var(--accent2),var(--accent)); color:#fff; font-weight:900; font-size:24px;
    box-shadow:0 10px 22px rgba(255,105,180,.3);
  }
  .ghost{ background:linear-gradient(#fff,#fff7fb); color:var(--ink); border:2px solid var(--line) }

  /* ì˜¤ë²„ë ˆì´ */
  .overlay{ position:absolute; inset:0; display:grid; place-items:center; background:linear-gradient(#fff8,#fff0); z-index:10; }
  .sheet{
    background:linear-gradient(#fff,#fff7fb); border:2px solid var(--line); border-radius:20px; padding:22px 26px; width:min(92%,700px);
    text-align:center; box-shadow:0 16px 40px rgba(255,105,180,.28);
  }
  h1.title{ font-family:'Jua', sans-serif; font-size:64px; margin:8px 0 4px; color:#ff5cab; letter-spacing:.8px; text-shadow:0 4px 0 #fff, 0 10px 20px rgba(255,105,180,.3) }
  .tiny{ font-size:22px; opacity:.7 }
  input[type="text"]{
    width:100%; font: inherit; font-size:28px; padding:10px 14px; border-radius:14px; border:2px solid var(--line);
    background:#fff; color:var(--ink);
  }
  .qbox{ display:grid; gap:10px; margin-top:8px; text-align:left }
  .q{ font-size:30px; color:var(--ink) }
  .theend{ font-size:28px; color:var(--muted); margin-top:8px }
</style>
</head>
<body>
<div class="frame" role="application" aria-label="ë‚˜ëŠ” ìš°ì˜ˆì›">
  <!-- ìƒë‹¨ ìƒíƒœë°” -->
  <div class="top">
    <div class="pill">ì¥ë©´ <span id="sceneIdx">1</span> / <span id="sceneTot">â€”</span></div>
    <div class="pill">ëª¨ë“œ <span id="mode">íƒ€ì´í‹€</span></div>
    <div style="margin-left:auto" class="pill ghost" id="resetBtn">ì²˜ìŒìœ¼ë¡œ</div>
  </div>

  <!-- ë³¸ë¬¸ ì˜ì—­ -->
  <div class="board">
    <div class="stage avatarWrap">
      <!-- ë‚˜ì¤‘ì— ì‹¤ì œ ì´ë¯¸ì§€ ê²½ë¡œë¡œ êµì²´ -->
      <img id="avatar" alt="ì—¬ìì•„ì´ ì´ë¯¸ì§€ ìë¦¬" src="2A6CCF3B-C7DE-4945-B4B3-7D1F2C1F681B.png"/>
      <div class="bubble" id="bubble"></div>
    </div>
    <div class="stage">
      <div class="textbox">
        <div class="card">
          <div class="who" id="who">ë‚˜ë ˆì´ì…˜</div>
          <div class="txt" id="text">â€”</div>
        </div>
      </div>
      <div class="controls">
        <button id="mainBtn">ì‹œì‘í•˜ê¸°</button>
      </div>
    </div>
  </div>

  <!-- íƒ€ì´í‹€ -->
  <div class="overlay" id="title">
    <div class="sheet">
      <h1 class="title">ë‚˜ëŠ” ìš°ì˜ˆì›</h1>
      <p class="tiny">ë°˜ì§ë°˜ì§ âœ¨</p>
      <div style="display:flex; gap:10px; justify-content:center; margin-top:6px">
        <button id="startBtn">ì‹œì‘í•˜ê¸°</button>
      </div>
    </div>
  </div>

  <!-- ì§ˆë¬¸ íŒ¨ë„ -->
  <div class="overlay" id="question" style="display:none">
    <div class="sheet">
      <div class="qbox">
        <div class="q" id="qText">ì§ˆë¬¸</div>
        <div id="answerWrap">
          <input type="text" id="answer" placeholder="ì—¬ê¸°ì— ì…ë ¥"/>
        </div>
        <div style="display:flex; gap:10px; justify-content:center">
          <button id="okBtn">í™•ì¸</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ì—”ë”© -->
  <div class="overlay" id="ending" style="display:none">
    <div class="sheet">
      <h1 class="title" style="font-size:48px">THE END</h1>
      <p class="theend">â€œë‚˜ëŠ” ë‚˜ ìì‹ ì¼ ë•Œ ê°€ì¥ ì•„ë¦„ë‹µê³  ê°€ì¥ ë¹›ë‚œë‹¤. ìš°ì˜ˆì›ì€ ì–´ë””ì„œë“  ë¹›ë‚˜ëŠ” ì¡´ì¬ë‹ˆê¹Œ.â€</p>
      <div style="display:flex; gap:10px; justify-content:center; margin-top:10px">
        <button id="replay">ë‹¤ì‹œ ë³´ê¸°</button>
      </div>
    </div>
  </div>
</div>

<script>
/* ===================== ìƒíƒœ & UI ë ˆí¼ëŸ°ìŠ¤ ===================== */
const UI = {
  who: document.getElementById('who'),
  text: document.getElementById('text'),
  mainBtn: document.getElementById('mainBtn'),
  title: document.getElementById('title'),
  startBtn: document.getElementById('startBtn'),
  question: document.getElementById('question'),
  qText: document.getElementById('qText'),
  answer: document.getElementById('answer'),
  okBtn: document.getElementById('okBtn'),
  sceneIdx: document.getElementById('sceneIdx'),
  sceneTot: document.getElementById('sceneTot'),
  mode: document.getElementById('mode'),
  bubble: document.getElementById('bubble'),
  ending: document.getElementById('ending'),
  replay: document.getElementById('replay'),
  resetBtn: document.getElementById('resetBtn'),
};
const S = {
  mode: 'íƒ€ì´í‹€', idx: 0, total: 0,
  answers: { color:'', hobby:'', skill:'', food:'', song:'' },
};

/* ===================== ìŠ¤í† ë¦¬ ì •ì˜ (ë„¤ ì„œìˆ  ê·¸ëŒ€ë¡œ) ===================== */
const phases = [
  // 0: íƒ€ì´í‹€ ì´í›„ â€” í”„ë¡¤ë¡œê·¸
  { who:'ë‚˜ë ˆì´ì…˜', text:'ë‚˜ëŠ” ìš°ì˜ˆì›ì´ë‹¤.', btn:'ê³„ì†', on:'intro' },

  // 1~5: ë²„íŠ¼ìœ¼ë¡œ ì§„í–‰ë˜ëŠ” ëŒ€í™”
  { who:'ìš°ì˜ˆì›', text:'ì•ˆë…•í•˜ì„¸ìš” ì €ëŠ” ìš°ì˜ˆì›ì´ì—ìš”.', btn:'ìš°ì˜ˆì›ê³¼ ëŒ€í™”í•˜ê¸°' },
  { who:'ë‚˜ë ˆì´ì…˜', text:'ë‚˜ëŠ” ìš°ì˜ˆì›ì´ë‹¤.', btn:'ìš°ì˜ˆì›ê³¼ ëŒ€í™”í•˜ê¸°' },
  { who:'ìš°ì˜ˆì›', text:'ì•ˆë…•í•˜ìƒˆìš” ì €ëŠ” ìš°ì–˜ì›ì´ì• ìš”.', btn:'ìš°ì˜ˆì›ê³¼ ëŒ€í™”í•˜ê¸°' },
  { who:'ë‚˜ë ˆì´ì…˜', text:'ë‚˜ëŠ” ìš°ì˜ˆì›ì´ë‹¤.', btn:'ìš°ì˜ˆì›ê³¼ ëŒ€í™”í•˜ê¸°' },
  { who:'ìš°ì˜ˆì›', text:'ì•ˆë…•í•˜ìƒˆìš” ì €ëŠ” ìš°ì–˜ì›ì´ì• ìš”. ìµœì• ë¼ë©´ì€ ì§„ìˆœ.', btn:'ìš°ì˜ˆì›ê³¼ ëŒ€í™”í•˜ê¸°' },
  { who:'ë‚˜ë ˆì´ì…˜', text:'ë‚˜ëŠ” ìš°ì˜ˆì›ì´ë‹¤.', btn:'ìš°ì˜ˆì›ê³¼ ëŒ€í™”í•˜ê¸°' },
  { who:'ìš°ì˜ˆì›', text:'ì•ˆë…•í•˜ìƒˆìš” ì €ëŠ” ìš°ì–˜ì›ì´ì• ìš”. ê°€ì‹ì ì¸ ì‚¬ëŒì„ ì‹¤ì–´í•´ìš”.', btn:'ìš°ì˜ˆì›ê³¼ ëŒ€í™”í•˜ê¸°' },
  { who:'ë‚˜ë ˆì´ì…˜', text:'ë‚˜ëŠ” ìš°ì˜ˆì›ì´ë‹¤.', btn:'ìš°ì˜ˆì›ê³¼ ëŒ€í™”í•˜ê¸°' },
  { who:'ìš°ì˜ˆì›', text:'ì•ˆë…•í•˜ìƒˆìš” ì €ëŠ” ìš°ì–˜ì›ì´ì• ìš”. ì‹¤í‚¤ë³´ì´ì¦ˆ ë…¸ë˜ ì°¸ ì¡°ì•„ì—¬~~', btn:'ìš°ì˜ˆì›ê³¼ ëŒ€í™”í•˜ê¸°' },
  { who:'ë‚˜ë ˆì´ì…˜', text:'ë‚˜ëŠ” ìš°ì˜ˆì›ì´ë‹¤.', btn:'ë‹¤ìŒ' },

  // 6: ìë™ìœ¼ë¡œ ìŸì•„ì§€ëŠ” ë…ë°±ë“¤(ë²„íŠ¼ ì—†ì´ ìë™ ì§„í–‰)
  { who:'ìš°ì˜ˆì›', text:'ì•ˆë…•í•˜ìƒˆìš” ì €ëŠ” ìš°ì–˜ì› ë¬´ë³‘ì¥ìˆ˜ë¥¼ ì°¬ì–‘í•˜ì§€ ì•°ë¹„í‹°ì•„ì´?ê·¸ëŸ¿ê°œê°€ì§€ììƒˆíˆëŠ” ê¸°ì–µì•ˆë‚˜ìš”', auto:true },
  { who:'ìš°ì˜ˆì›', text:'ì•ˆë…•í•˜ìƒˆìš” ì €ëŠ” ìš°ì–˜ì›ì…ë‹ˆë‹¤ ì•„ì¹¨ì‹œê°„ì—…ìœ¼ë©´ ì•ˆë¨¹ê³  ì‹œê°„ì‡ìœ¼ë©´ ë°© ë‚´^^ ì•ˆë…•í•˜ìƒˆìš”', auto:true },
  { who:'ìš°ì˜ˆì›', text:'ì•ˆë…•í•˜ìƒˆìš” ì €ëŠ” ìš°ì˜ˆì›ì…ë‹ˆë‹¤ í•˜ì´ë£¨ yewon795 ì•ˆë…•í•˜ìƒˆìš” ì•ˆë…•', auto:true },
  { who:'ìš°ì˜ˆì›', text:'ì•ˆë…•í•˜ìƒˆìš” ì €ëŠ” ìš°ì˜ˆì›ì…ë‹ˆë‹¤ ì• ìŠ¤í¬í”„ì‚¬ ê·€ì—½ì”ì•„', auto:true },
  { who:'ìš°ì˜ˆì›', text:'í—ˆê±±ìŠ¤ ë‚´? ë‚´? ì•ˆë…•í•˜ìƒˆìš” ë‚´? ë‚´? ë‚´?', auto:true },
  { who:'ìš°ì˜ˆì›', text:'ì €ëŠ” ìš°ì–˜ì› ì•ˆë…•í•˜ìƒˆìš” í—ˆê±±ìŠ¤ ë‚´? ë‚´^^ ë‚´? ì €ëŠ” ìš°ì–˜ì› ë‚´? ìš°ì–˜ì›.. ì €ëŠ”..', auto:true },
  { who:'ë‚˜ë ˆì´ì…˜', text:'ë‚˜ëŠ”.. ìš°ì˜ˆì›ì´ë‹¤.. ë‚˜ëŠ”..', auto:true },
  { who:'ë‚˜ë ˆì´ì…˜', text:'ìš°ì˜ˆì›ì´ ëˆ„êµ¬ì§€?', auto:true, on:'whois' },

  // 7: ???ê³¼ ëŒ€í™”í•˜ê¸°
  { who:'???', text:'ë‚˜ëŠ”â€¦ ë‚˜ëŠ”â€¦', btn:'???ê³¼ ëŒ€í™”í•˜ê¸°' },
  { who:'???', text:'ë‚˜ëŠ” ìš°ì˜ˆì›ì´ì•¼!!!!!!!!', btn:'ê³„ì†', on:'qa' },

  // 8: ì§ˆë¬¸ë“¤(ì˜¤ë²„ë ˆì´ ì…ë ¥ ë‹¨ê³„ë¡œ ì´ë™)
];

UI.sceneTot.textContent = phases.length;

/* ===================== ìœ í‹¸ ===================== */
function setMode(m){ S.mode=m; UI.mode.textContent=m; }
function showBubble(text){
  UI.bubble.style.display='block';
  UI.bubble.textContent=text;
  setTimeout(()=>UI.bubble.style.display='none', 2000);
}
function typeIn(el, html){
  // ê°„ë‹¨ íƒ€ì´í•‘ (ì™„ë£Œ ì‹œ ìµœì¢… HTML ë„£ê¸°)
  const tmp=document.createElement('div'); tmp.innerHTML=html;
  const text = tmp.textContent||tmp.innerText||'';
  el.innerHTML='';
  let i=0; const timer=setInterval(()=>{
    el.textContent += text[i++]||'';
    if(i>=text.length){ clearInterval(timer); el.innerHTML=html; }
  }, 14);
}

/* ===================== ë Œë” ===================== */
function render(i){
  S.idx = Math.max(0, Math.min(phases.length-1, i));
  const node = phases[S.idx];
  UI.sceneIdx.textContent = S.idx+1;

  UI.who.textContent = node.who || 'â€”';
  typeIn(UI.text, node.text || '');

  // ë²„íŠ¼ ë ˆì´ë¸”
  UI.mainBtn.textContent = node.btn || 'ë‹¤ìŒ';

  // ìë™ ì§„í–‰
  if(node.auto){
    UI.mainBtn.disabled = true;
    setTimeout(()=>{
      UI.mainBtn.disabled = false;
      if(node.on){ nextPhase(node.on); }
      else if(S.idx < phases.length-1){ render(S.idx+1); }
    }, 900); // ìë™ í…œí¬
  }else{
    UI.mainBtn.disabled = false;
  }

  // íŠ¹ìˆ˜ ì´ë²¤íŠ¸
  if(node.on){
    // onì€ ë‹¤ìŒ ë‹¨ê³„ ì „í™˜ íŠ¸ë¦¬ê±°ë§Œ ë‹´ë‹¹, ë Œë”ëŠ” í˜„ì¬ ì¥ë©´ í‘œì‹œ
  }
}

/* ===================== ë‹¨ê³„ ì „í™˜ ë¡œì§ ===================== */
function nextPhase(tag){
  if(tag==='intro'){ setMode('ìŠ¤í† ë¦¬'); render(S.idx+1); return; }
  if(tag==='whois'){ setMode('ì •ì²´ì„±'); UI.mainBtn.textContent='???ê³¼ ëŒ€í™”í•˜ê¸°'; render(S.idx+1); return; }
  if(tag==='qa'){ setMode('ì§ˆë¬¸'); startQA(); return; }
}

/* ===================== ì§ˆë¬¸ í”Œë¡œìš° ===================== */
const qList = [
  { key:'color', q:'ë„¤ê°€ ì¢‹ì•„í•˜ëŠ” ìƒ‰ì€ ë­ì•¼?' },
  { key:'hobby', q:'ë„¤ ì·¨ë¯¸ëŠ” ë¬´ì—‡ì´ì•¼?' },
  { key:'skill', q:'íŠ¹ê¸°ëŠ”? ë¬´ì—‡ì„ ì˜ í•˜ë‹ˆ?' },
  { key:'food', q:'ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ìŒì‹ì€?' },
  { key:'song', q:'ì¢‹ì•„í•˜ëŠ” ë…¸ë˜ëŠ”?' },
  // ë§ˆì§€ë§‰ ê°•ì œ ì§ˆë¬¸: ë²„íŠ¼ 'ì‘'ë§Œ
  { key:'confirm', q:'ë„ˆëŠ” ìš°ì˜ˆì›ì´ì§€.' }
];
let qi = 0;

function startQA(){
  qi = 0;
  UI.question.style.display='grid';
  ask();
}
function ask(){
  const item = qList[qi];
  UI.qText.textContent = item.q;
  const wrap = document.getElementById('answerWrap');
  wrap.innerHTML = '';
  if(item.key==='confirm'){
    // ì…ë ¥ ë¶ˆê°€, 'ì‘' ë²„íŠ¼ë§Œ
    UI.okBtn.textContent = 'ì‘';
    const p = document.createElement('p');
    p.className='tiny'; p.textContent='(ì´ ì§ˆë¬¸ì€ ëŒ€ë‹µì´ í•˜ë‚˜ë¿ì´ì•¼)';
    wrap.appendChild(p);
  }else{
    const input = document.createElement('input');
    input.type='text'; input.id='answer'; input.placeholder='ì—¬ê¸°ì— ì…ë ¥';
    input.autofocus=true; wrap.appendChild(input);
    UI.okBtn.textContent = 'í™•ì¸';
    setTimeout(()=>{ input.focus(); }, 50);
  }
}

UI.okBtn.onclick = ()=>{
  const item = qList[qi];
  if(item.key!=='confirm'){
    const value = (document.getElementById('answer')?.value || '').trim();
    if(!value){ showBubble('ì‚´ì§ë§Œ ì¨ì¤˜ âœ¨'); return; }
    S.answers[item.key] = value;
  }
  qi++;
  if(qi < qList.length){ ask(); }
  else{
    UI.question.style.display='none';
    summaryScene();
  }
};

/* ===================== ìš”ì•½ & ì—”ë”© ===================== */
function summaryScene(){
  setMode('ì—”ë”©');
  // ë§í’ì„ ì— ìê¸°ì„ ì–¸
  const t = `ë°˜ê°€ì›Œ! ë‚˜ëŠ” ìš°ì˜ˆì›ì´ì•¼.
ë‚´ê°€ ì¢‹ì•„í•˜ëŠ” ìƒ‰ì€ ${S.answers.color}.
ë‚´ ì·¨ë¯¸ëŠ” ${S.answers.hobby}.
íŠ¹ê¸°ëŠ” ${S.answers.skill}.
ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ìŒì‹ì€ ${S.answers.food}.
ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ë…¸ë˜ëŠ” ${S.answers.song}.
ë‚˜ëŠ” ìš°ì˜ˆì›ì´ì•¼. ì˜ ë¶€íƒí•´!`;
  UI.who.textContent = 'ìš°ì˜ˆì›';
  typeIn(UI.text, t.replace(/\n/g,'<br/>'));
  showBubble('ë‚˜ëŠ” ìš°ì˜ˆì›ì´ì•¼! ğŸ’–');

  // ì ê¹ ê°ìƒ í›„ ì—”ë”© í™”ë©´
  setTimeout(()=>{ UI.ending.style.display='grid'; }, 1800);
}

/* ===================== ì´ë²¤íŠ¸ ë°”ì¸ë”© ===================== */
UI.startBtn.onclick = ()=>{
  UI.title.style.display='none';
  setMode('ìŠ¤í† ë¦¬');
  UI.mainBtn.textContent='ê³„ì†';
  render(0);
};

UI.mainBtn.onclick = ()=>{
  const node = phases[S.idx];
  if(node.on){ nextPhase(node.on); return; }
  if(S.idx < phases.length-1){ render(S.idx+1); }
};

UI.replay.onclick = ()=>{ location.reload(); };
UI.resetBtn.onclick = ()=>{ location.reload(); };

/* ì´ˆê¸° ìƒíƒœ */
setMode('íƒ€ì´í‹€');
UI.mainBtn.textContent = 'ì‹œì‘í•˜ê¸°';
UI.who.textContent = 'â€”';
UI.text.textContent = 'íƒ€ì´í‹€ì—ì„œ ì‹œì‘í•˜ê¸°ë¥¼ ëˆŒëŸ¬ì¤˜!';
render(0); // ì”¬ ì´ê³„ ë°˜ì˜ë§Œ
</script>
</body>
</html>
